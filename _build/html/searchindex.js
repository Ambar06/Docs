Search.setIndex({"docnames": ["bus_stops", "index", "modules", "prediction", "timetable"], "filenames": ["bus_stops.rst", "index.rst", "modules.rst", "prediction.rst", "timetable.rst"], "titles": ["bus_stops module", "Welcome to Documentation\u2019s documentation!", "codes", "prediction module", "timetable module"], "terms": {"class": [0, 3, 4], "busstopsutil": [0, 2], "bus_numb": [0, 3, 4], "from_dat": [0, 4], "to_dat": [0, 4], "sourc": [0, 3, 4], "base": [0, 3, 4], "object": [0, 3, 4], "author": [0, 3, 4], "ambar": 0, "thi": [0, 4], "handl": [0, 3, 4], "bu": [0, 3, 4], "stop": [0, 4], "data": [0, 3], "oper": 0, "pseudocod": [0, 3, 4], "initi": [0, 4], "instanc": [0, 3, 4], "config_data": 0, "function": [0, 3, 4], "haversin": [0, 2], "lat1": 0, "lon1": 0, "lat2": 0, "lon2": 0, "r": 0, "6371000": 0, "convert": 0, "latitud": [0, 3], "longitud": [0, 3], "radian": 0, "calcul": [0, 3, 4], "dlat": 0, "dlon": 0, "c": 0, "distanc": [0, 3], "return": [0, 3, 4], "end": 0, "is_in_rang": [0, 2], "p1": 0, "p2": 0, "rang": [0, 4], "us": [0, 3], "IF": 0, "print": 0, "true": [0, 3, 4], "els": [0, 3, 4], "fals": [0, 3, 4], "load_stop": [0, 2], "api_typ": 0, "set": 0, "result": 0, "statu": [0, 3], "attribut": [0, 3], "try": 0, "get": [0, 3, 4], "stopstatu": 0, "config": 0, "i": [0, 3, 4], "none": [0, 3, 4], "mp_predict": 0, "creat": [0, 3, 4], "list": [0, 3, 4], "predictedstop": 0, "differ": [0, 3], "bulk": 0, "entri": [0, 3, 4], "id": [0, 3, 4], "write": 0, "log": 0, "file": 0, "compare_mp_stop": [0, 2], "analysisdata": 0, "new_mp_stop": 0, "old_mp_stop": 0, "new_record": 0, "iter": [0, 4], "through": 0, "check_rang": 0, "new_stop": 0, "continu": 0, "point": [0, 3, 4], "old_stop": 0, "It": 0, "": [0, 3, 4], "append": 0, "ad": 0, "ani": [0, 4], "ha": [0, 3], "new": 0, "geofence_radiu": 0, "meter": 0, "from": [0, 4], "previou": [0, 4], "wa": 0, "length": 0, "greater": 0, "than": [0, 4], "0": [0, 3, 4], "call": [0, 3, 4], "predicted_stop": 0, "NO": 0, "were": 0, "compare_ab_stop": [0, 2], "new_ab_stop": 0, "ab_predict": 0, "old_ab_stop": 0, "auto_attach_stop": [0, 2], "compar": 0, "updat": [0, 3, 4], "ab": 0, "apnibu": 0, "mp": 0, "movingpanda": 0, "method": [0, 3, 4], "load": 0, "static": 0, "distance_to_decimal_degre": [0, 2], "formula": 0, "inform": 0, "http": 0, "en": 0, "wikipedia": 0, "org": 0, "wiki": 0, "decimal_degre": 0, "www": 0, "movabl": 0, "type": [0, 3], "co": 0, "uk": 0, "script": 0, "latlong": 0, "html": 0, "paramet": [0, 3, 4], "an": 0, "django": 0, "contrib": 0, "gi": 0, "measur": 0, "y": 0, "coordin": 0, "locat": 0, "classmethod": 0, "check": 0, "two": 0, "ar": [0, 3, 4], "within": [0, 3, 4], "specifi": 0, "tupl": 0, "The": 0, "first": [0, 4], "second": 0, "int": [0, 4], "maximum": 0, "otherwis": 0, "bool": 0, "databas": 0, "datafram": 0, "str": [0, 3, 4], "api": 0, "created_entry_id": 0, "converttopoint": [0, 2, 3], "lat": [0, 3], "lng": 0, "create_new_stop": [0, 2], "perform": 0, "follow": 0, "step": 0, "busstatuscheck": 0, "b_obj": 0, "retriev": 0, "number": [0, 4], "do": 0, "have": [0, 3, 4], "record": [0, 4], "checkstatu": 0, "current": [0, 3, 4], "date": [0, 4], "time": [0, 3, 4], "todai": 0, "three": 0, "dai": [0, 3, 4], "ago": 0, "three_days_back": 0, "chang": [0, 4], "them": 0, "datetim": [0, 4], "each": [0, 4], "action": [0, 3], "b": [0, 4], "bs_u": 0, "respons": 0, "manag": 0, "creation": 0, "below": 0, "criteria": 0, "decid": 0, "note": [0, 3], "ensur": [0, 4], "necessari": 0, "depend": 0, "properli": 0, "defin": 0, "import": 0, "your": 0, "code": [0, 1], "bus_list": 0, "current_date_and_tim": 0, "calculate_three_days_back": 0, "FOR": 0, "IN": 0, "done": 0, "process": 0, "complet": 0, "current_d": 0, "three_days_ago": 0, "subtract": 0, "3": [0, 3, 4], "format": 0, "string": 0, "yyyi": 0, "mm": 0, "dd": 0, "bus_stop": [1, 2], "modul": [1, 2], "predict": [1, 2, 4], "timet": [1, 2, 3], "index": 1, "search": 1, "page": 1, "predictionlog": [2, 3], "calculatehistoricaleta": [2, 3], "midtrip": [2, 3], "starttrip": [2, 3], "updatepredict": [2, 3], "timetableact": [2, 4], "route_history_time_buff": [2, 4], "traccar_event_time_buff": [2, 4], "enterexitev": [2, 4], "generatehistoryrout": [2, 4], "generatehistoryrouteal": [2, 4], "updateeta": [2, 4], "m": [3, 4], "bagga": [3, 4], "shiva": [3, 4], "descript": [3, 4], "relat": [3, 4], "logic": [3, 4], "simpler": [3, 4], "word": [3, 4], "start_trip": 3, "mid_trip": 3, "trip_numb": [3, 4], "posit": [3, 4], "historicaleta": 3, "given": [3, 4], "obj": [3, 4], "contain": 3, "lon": 3, "to_next_timet": 3, "next": [3, 4], "orderdbi": 3, "arrival_tim": 3, "1": [3, 4], "current_point": 3, "2": [3, 4], "closest": 3, "histor": [3, 4], "fetch": [3, 4], "busroutehistori": [3, 4], "paral": 3, "add": 3, "field": 3, "e": [3, 4], "between": 3, "historical_loc": 3, "current_loc": 3, "orderbi": [3, 4], "closest_historical_point_to_curr_po": 3, "filter_result": 3, "adda": [3, 4], "next_bus_adda": 3, "next_bus_adda_point": 3, "closest_historical_point_to_next_adda": 3, "estim": 3, "eta": [3, 4], "4": 3, "devic": [3, 4], "min": [3, 4], "est_remaining_tim": 3, "devicetim": 3, "remain": 3, "remaining_time_min": 3, "actual_arrival_tim": [3, 4], "current_tim": 3, "time_diff_min": [3, 4], "estimated_device_time_min": 3, "fall": 3, "30": 3, "threshold": 3, "cross": 3, "predicted_bi": 3, "update_eta": 3, "prediction_action__cod": 3, "offtrack_max_tim": 3, "prediction_data": 3, "update_time_min": 3, "to_timet": 3, "from_timet": 3, "past_predict": 3, "mid": 3, "trip": [3, 4], "time_t": [3, 4], "current_posit": 3, "start": [3, 4], "past": 3, "isn": 3, "t": 3, "provid": 3, "latest": 3, "combin": [3, 4], "commoncheck": 3, "possibl": [3, 4], "valu": [3, 4], "pass": [3, 4], "gps_offlin": 3, "no_posit": 3, "previous_day_arrival_tim": 3, "previous_day_travel": 3, "checkmov": 3, "to_posit": 3, "to_next_posit": 3, "from_posit": 3, "next_adda_arrival_tim": 3, "next_to_next_posit": 3, "exist": [3, 4], "all": [3, 4], "can": [3, 4], "offtrack_max_dist": 3, "offtrack": 3, "wrong_rout": 3, "bus_adda_skip": 3, "on_track": 3, "dict": 3, "next_to_next": 3, "predictiontyp": 3, "tt_id": 3, "noth": [3, 4], "input": [3, 4], "output": [3, 4], "arrtibut": 4, "minut": 4, "which": 4, "save": 4, "window": 4, "traccar": 4, "event": 4, "thei": 4, "occur": 4, "close": 4, "schedul": 4, "arriv": 4, "buffer": 4, "consid": 4, "gener": 4, "5": 4, "rout": 4, "histori": 4, "buse": 4, "activ": 4, "tt": 4, "enter": 4, "exit": 4, "120": 4, "bus_adda": 4, "event_typ": 4, "event_tim": 4, "trigger": 4, "uuid": 4, "increas": 4, "indirectli": 4, "order": 4, "sequenc": 4, "multipl": 4, "timetable_obj": 4, "is_act": 4, "distinct": 4, "should": 4, "active_timetable_obj": 4, "filter": 4, "1st": 4, "previous_dai": 4, "prev_day_arrival_tim": 4, "stop_typ": 4, "let": 4, "elif": 4, "prediction_action_cod": 4, "route_chag": 4, "mid_trip_start": 4, "singl": 4, "tt_obj": 4, "make": 4, "inact": 4, "those": 4, "time_field": 4, "departur": 4, "timetable_list_to_upd": 4, "deviceid": 4, "same": 4, "name": 4, "delet": 4, "server_tim": 4, "No": 4, "start_tim": 4, "po": 4, "device_tim": 4, "other": 4, "correspond": 4, "account": 4, "gap": 4, "befor": 4, "out": 4, "prior": 4, "bushistoricalrout": 4, "sleep": 4, "sec": 4, "time_differ": 4, "dictionari": 4, "must": 4, "happen": 4, "both": 4}, "objects": {"": [[0, 0, 0, "-", "bus_stops"], [3, 0, 0, "-", "prediction"], [4, 0, 0, "-", "timetable"]], "bus_stops": [[0, 1, 1, "", "BusStopsUtils"], [0, 3, 1, "", "convertToPoint"], [0, 3, 1, "", "create_new_stops"]], "bus_stops.BusStopsUtils": [[0, 2, 1, "", "auto_attach_stop"], [0, 2, 1, "", "compare_ab_stop"], [0, 2, 1, "", "compare_mp_stop"], [0, 2, 1, "", "distance_to_decimal_degrees"], [0, 2, 1, "", "haversine"], [0, 2, 1, "", "is_in_range"], [0, 2, 1, "", "load_stop"]], "prediction": [[3, 1, 1, "", "PredictionLogic"]], "prediction.PredictionLogic": [[3, 2, 1, "", "calculateHistoricalETA"], [3, 2, 1, "", "midTrip"], [3, 2, 1, "", "startTrip"], [3, 2, 1, "", "updatePrediction"]], "timetable": [[4, 1, 1, "", "TimeTableAction"]], "timetable.TimeTableAction": [[4, 4, 1, "", "ROUTE_HISTORY_TIME_BUFFER"], [4, 4, 1, "", "TRACCAR_EVENT_TIME_BUFFER"], [4, 2, 1, "", "enterExitEvent"], [4, 2, 1, "", "generateHistoryRoute"], [4, 2, 1, "", "generateHistoryRouteAll"], [4, 2, 1, "", "updateETA"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function", "4": "py:attribute"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"], "4": ["py", "attribute", "Python attribute"]}, "titleterms": {"bus_stop": 0, "modul": [0, 3, 4], "welcom": 1, "document": 1, "": 1, "content": 1, "indic": 1, "tabl": 1, "code": 2, "predict": 3, "timet": 4}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.viewcode": 1, "sphinx": 58}, "alltitles": {"bus_stops module": [[0, "module-bus_stops"]], "Welcome to Documentation\u2019s documentation!": [[1, "welcome-to-documentation-s-documentation"]], "Contents:": [[1, null]], "Indices and tables": [[1, "indices-and-tables"]], "codes": [[2, "codes"]], "prediction module": [[3, "module-prediction"]], "timetable module": [[4, "module-timetable"]]}, "indexentries": {"busstopsutils (class in bus_stops)": [[0, "bus_stops.BusStopsUtils"]], "auto_attach_stop() (bus_stops.busstopsutils method)": [[0, "bus_stops.BusStopsUtils.auto_attach_stop"]], "bus_stops": [[0, "module-bus_stops"]], "compare_ab_stop() (bus_stops.busstopsutils method)": [[0, "bus_stops.BusStopsUtils.compare_ab_stop"]], "compare_mp_stop() (bus_stops.busstopsutils method)": [[0, "bus_stops.BusStopsUtils.compare_mp_stop"]], "converttopoint() (in module bus_stops)": [[0, "bus_stops.convertToPoint"]], "create_new_stops() (in module bus_stops)": [[0, "bus_stops.create_new_stops"]], "distance_to_decimal_degrees() (bus_stops.busstopsutils static method)": [[0, "bus_stops.BusStopsUtils.distance_to_decimal_degrees"]], "haversine() (bus_stops.busstopsutils static method)": [[0, "bus_stops.BusStopsUtils.haversine"]], "is_in_range() (bus_stops.busstopsutils class method)": [[0, "bus_stops.BusStopsUtils.is_in_range"]], "load_stop() (bus_stops.busstopsutils method)": [[0, "bus_stops.BusStopsUtils.load_stop"]], "module": [[0, "module-bus_stops"], [3, "module-prediction"], [4, "module-timetable"]], "predictionlogic (class in prediction)": [[3, "prediction.PredictionLogic"]], "calculatehistoricaleta() (prediction.predictionlogic method)": [[3, "prediction.PredictionLogic.calculateHistoricalETA"]], "midtrip() (prediction.predictionlogic method)": [[3, "prediction.PredictionLogic.midTrip"]], "prediction": [[3, "module-prediction"]], "starttrip() (prediction.predictionlogic method)": [[3, "prediction.PredictionLogic.startTrip"]], "updateprediction() (prediction.predictionlogic method)": [[3, "prediction.PredictionLogic.updatePrediction"]], "route_history_time_buffer (timetable.timetableaction attribute)": [[4, "timetable.TimeTableAction.ROUTE_HISTORY_TIME_BUFFER"]], "traccar_event_time_buffer (timetable.timetableaction attribute)": [[4, "timetable.TimeTableAction.TRACCAR_EVENT_TIME_BUFFER"]], "timetableaction (class in timetable)": [[4, "timetable.TimeTableAction"]], "enterexitevent() (timetable.timetableaction method)": [[4, "timetable.TimeTableAction.enterExitEvent"]], "generatehistoryroute() (timetable.timetableaction method)": [[4, "timetable.TimeTableAction.generateHistoryRoute"]], "generatehistoryrouteall() (timetable.timetableaction method)": [[4, "timetable.TimeTableAction.generateHistoryRouteAll"]], "timetable": [[4, "module-timetable"]], "updateeta() (timetable.timetableaction method)": [[4, "timetable.TimeTableAction.updateETA"]]}})